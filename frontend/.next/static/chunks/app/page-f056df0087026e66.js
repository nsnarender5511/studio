(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5831:(e,t,r)=>{Promise.resolve().then(r.bind(r,6195))},6195:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ef});var s=r(5155),a=r(2115),n=r(221),o=r(2177),l=r(5594),i=r(3036),d=r(172),c=r(9708),u=r(2085),f=r(9434);let m=(0,u.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:o=!1,...l}=e,i=o?c.DX:"button";return(0,s.jsx)(i,{className:(0,f.cn)(m({variant:a,size:n,className:r})),ref:t,...l})});x.displayName="Button";var h=r(968);let p=(0,u.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(h.b,{ref:t,className:(0,f.cn)(p(),r),...a})});g.displayName=h.b.displayName;let b=o.Op,j=a.createContext({}),v=e=>{let{...t}=e;return(0,s.jsx)(j.Provider,{value:{name:t.name},children:(0,s.jsx)(o.xI,{...t})})},y=()=>{let e=a.useContext(j),t=a.useContext(N),{getFieldState:r,formState:s}=(0,o.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},N=a.createContext({}),w=a.forwardRef((e,t)=>{let{className:r,...n}=e,o=a.useId();return(0,s.jsx)(N.Provider,{value:{id:o},children:(0,s.jsx)("div",{ref:t,className:(0,f.cn)("space-y-2",r),...n})})});w.displayName="FormItem";let S=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:o}=y();return(0,s.jsx)(g,{ref:t,className:(0,f.cn)(n&&"text-destructive",r),htmlFor:o,...a})});S.displayName="FormLabel";let R=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:n,formDescriptionId:o,formMessageId:l}=y();return(0,s.jsx)(c.DX,{ref:t,id:n,"aria-describedby":a?"".concat(o," ").concat(l):"".concat(o),"aria-invalid":!!a,...r})});R.displayName="FormControl",a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=y();return(0,s.jsx)("p",{ref:t,id:n,className:(0,f.cn)("text-sm text-muted-foreground",r),...a})}).displayName="FormDescription";let T=a.forwardRef((e,t)=>{var r;let{className:a,children:n,...o}=e,{error:l,formMessageId:i}=y(),d=l?String(null!=(r=null==l?void 0:l.message)?r:""):n;return d?(0,s.jsx)("p",{ref:t,id:i,className:(0,f.cn)("text-sm font-medium text-destructive",a),...o,children:d}):null});T.displayName="FormMessage";let _=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,f.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});_.displayName="Input";let E=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});E.displayName="Card";let A=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",r),...a})});A.displayName="CardHeader";let C=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});C.displayName="CardTitle";let I=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("text-sm text-muted-foreground",r),...a})});I.displayName="CardDescription";let D=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("p-6 pt-0",r),...a})});D.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,f.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var k=r(7481),F=r(4477);let M=(0,F.createServerReference)("40814f5367fff36cac8de276bb43484fd427532fc1",F.callServer,void 0,F.findSourceMapURL,"startDocumentationProcess"),U=l.z.object({repoUrl:l.z.string().min(1,{message:"Repository URL or local path is required."}).refine(e=>e.trim().length>0,{message:"Repository URL or local path cannot be empty."})});function O(e){let{onJobSubmitted:t}=e,[r,l]=(0,a.useState)(!1),{toast:c}=(0,k.dj)(),u=(0,o.mN)({resolver:(0,n.u)(U),defaultValues:{repoUrl:""}});async function f(e){l(!0);try{let r=e.repoUrl;console.log("Submitting repo input:",r);let s=await M(r);if("error"in s)throw Error(s.error);c({title:"Documentation Job Submitted",description:"Processing started for ".concat(r,". Job ID: ").concat(s.job_id,". Check history below for updates."),duration:5e3}),u.reset(),null==t||t()}catch(t){console.error("Error submitting documentation job:",t);let e=t instanceof Error?t.message:"An unknown error occurred.";c({variant:"destructive",title:"Submission Failed",description:"".concat(e)})}finally{l(!1)}}return(0,s.jsxs)(E,{className:"w-full max-w-lg shadow-md",children:[(0,s.jsxs)(A,{children:[(0,s.jsxs)(C,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"h-6 w-6 text-primary"}),"Document Repository"]}),(0,s.jsx)(I,{children:"Enter a GitHub repository URL or a local path to start the automated documentation process."})]}),(0,s.jsx)(D,{children:(0,s.jsx)(b,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(f),className:"space-y-6",children:[(0,s.jsx)(v,{control:u.control,name:"repoUrl",render:e=>{let{field:t}=e;return(0,s.jsxs)(w,{children:[(0,s.jsx)(S,{htmlFor:"repoUrl",children:"Repository URL or Local Path"}),(0,s.jsx)(R,{children:(0,s.jsx)(_,{id:"repoUrl",placeholder:"https://github.com/user/repo or /path/to/local/repo",...t,"aria-describedby":"repoUrl-message",disabled:r})}),(0,s.jsx)(T,{id:"repoUrl-message"})]})}}),(0,s.jsx)(x,{type:"submit",className:"w-full",disabled:r,children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Generate Documentation"})]})})})]})}var L=r(7648),P=r(8376),z=r(4371),H=r(1949);let J=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,f.cn)("w-full caption-bottom text-sm",r),...a})})});J.displayName="Table";let V=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,f.cn)("[&_tr]:border-b",r),...a})});V.displayName="TableHeader";let G=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,f.cn)("[&_tr:last-child]:border-0",r),...a})});G.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,f.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let K=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,f.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});K.displayName="TableRow";let X=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,f.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});X.displayName="TableHead";let q=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,f.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});q.displayName="TableCell";let B=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,f.cn)("mt-4 text-sm text-muted-foreground",r),...a})});B.displayName="TableCaption";let Q=(0,u.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function W(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,f.cn)(Q({variant:r}),t),...a})}var $=r(4439);let Y=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)($.bL,{ref:t,className:(0,f.cn)("relative overflow-hidden",r),...n,children:[(0,s.jsx)($.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(Z,{}),(0,s.jsx)($.OK,{})]})});Y.displayName=$.bL.displayName;let Z=a.forwardRef((e,t)=>{let{className:r,orientation:a="vertical",...n}=e;return(0,s.jsx)($.VM,{ref:t,orientation:a,className:(0,f.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,s.jsx)($.lr,{className:"relative flex-1 rounded-full bg-border"})})});function ee(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",t),...r})}Z.displayName=$.VM.displayName;var et=r(3917);let er=et.Kq,es=et.bL,ea=et.l9,en=a.forwardRef((e,t)=>{let{className:r,sideOffset:a=4,...n}=e;return(0,s.jsx)(et.UC,{ref:t,sideOffset:a,className:(0,f.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})});en.displayName=et.UC.displayName;var eo=r(3343),el=r(6681);let ei=(0,F.createServerReference)("00dd253e14997f020c53f8e21ea5aba715824e7e3b",F.callServer,void 0,F.findSourceMapURL,"fetchExecutionHistory"),ed=(0,F.createServerReference)("40b29c14d9c1d04b3fff25d9ffa0cb62da45258fb2",F.callServer,void 0,F.findSourceMapURL,"fetchJobStatus"),ec={pending:{variant:"outline",Icon:L.A},running:{variant:"secondary",Icon:d.A},completed:{variant:"default",Icon:P.A},failed:{variant:"destructive",Icon:z.A}};function eu(e){let{refreshKey:t}=e,[r,n]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[i,c]=(0,a.useState)(null),{toast:u}=(0,k.dj)(),f=(0,a.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&l(!0),c(null),console.log("Fetching execution history...");let t=await ei();"error"in t?(c(t.error),u({variant:"destructive",title:"Failed to Load History",description:t.error}),console.error("Error fetching history:",t.error)):(n(t),console.log("History fetched successfully:",t.length,"items")),e&&l(!1)},[u]);(0,a.useEffect)(()=>{console.log("Effect triggered: Initial load or refreshKey changed",t),f()},[f,t]),(0,a.useEffect)(()=>{let e=r.filter(e=>"running"===e.status).map(e=>e.job_id);if(0===e.length)return;let t=setInterval(async()=>{for(let t of(console.log("Polling for status updates...",e),e)){let e=await ed(t);"error"in e?console.warn("Polling failed for job ".concat(t,": ").concat(e.error)):n(r=>{let s=r.map(r=>r.job_id===t?e:r),a=r.find(e=>e.job_id===t);return(null==a?void 0:a.status)!==e.status&&("completed"===e.status||"failed"===e.status)&&(u({title:"Job ".concat(e.status.toUpperCase()),description:"Job for ".concat(e.repo_url.split("/").slice(-2).join("/")," finished.")}),console.log("Job ".concat(t," finished with status: ").concat(e.status))),s})}},5e3);return()=>{console.log("Clearing polling interval."),clearInterval(t)}},[r,u]);let m=()=>(0,s.jsx)(s.Fragment,{children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(K,{children:[(0,s.jsx)(q,{children:(0,s.jsx)(ee,{className:"h-4 w-3/4"})}),(0,s.jsx)(q,{children:(0,s.jsx)(ee,{className:"h-4 w-1/2"})}),(0,s.jsx)(q,{children:(0,s.jsx)(ee,{className:"h-4 w-1/4"})}),(0,s.jsx)(q,{children:(0,s.jsx)(ee,{className:"h-4 w-1/4"})}),(0,s.jsx)(q,{children:(0,s.jsx)(ee,{className:"h-4 w-full"})})]},"skel-".concat(t)))});return(0,s.jsxs)(E,{className:"w-full mt-8 shadow-md",children:[(0,s.jsxs)(A,{className:"flex flex-row items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(C,{className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"h-6 w-6 text-primary"}),"Execution History"]}),(0,s.jsx)(I,{children:"Track the progress and status of your documentation jobs. Running jobs update automatically."})]}),(0,s.jsxs)(x,{variant:"outline",size:"sm",onClick:()=>f(!0),disabled:o,children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4 ".concat(o?"animate-spin":"hidden")}),"Refresh"]})]}),(0,s.jsxs)(D,{children:[i&&(0,s.jsxs)("div",{className:"flex items-center justify-center p-4 text-destructive bg-destructive/10 rounded-md border border-destructive/30",children:[(0,s.jsx)(H.A,{className:"h-5 w-5 mr-2"}),(0,s.jsxs)("span",{children:["Error loading history: ",i]})]}),(0,s.jsx)(Y,{className:"h-[400px] w-full rounded-md border ".concat(i?"mt-4":""),children:(0,s.jsx)(er,{children:(0,s.jsxs)(J,{children:[o&&0===r.length&&(0,s.jsx)(B,{children:"Loading history..."}),!o&&!i&&0===r.length&&(0,s.jsx)(B,{children:"No documentation history yet. Submit a repository above."}),(0,s.jsx)(V,{children:(0,s.jsxs)(K,{children:[(0,s.jsx)(X,{children:"Repository / Path"}),(0,s.jsx)(X,{children:"Started"}),(0,s.jsx)(X,{children:"Duration"}),(0,s.jsx)(X,{children:"Status"}),(0,s.jsx)(X,{children:"Details"})]})}),(0,s.jsxs)(G,{children:[o&&0===r.length?m():r.map(e=>{let{Icon:t,variant:r}=ec[e.status]||ec.pending,a=e.repo_url.includes("/")?e.repo_url.split("/").slice(-2).join("/"):e.repo_url;return(0,s.jsxs)(K,{children:[(0,s.jsx)(q,{className:"font-medium truncate max-w-xs",children:(0,s.jsxs)(es,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)("span",{children:a})}),(0,s.jsx)(en,{children:(0,s.jsx)("p",{children:e.repo_url})})]})}),(0,s.jsx)(q,{children:(0,s.jsxs)(es,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)("span",{children:function(e){try{let t=(0,eo.H)(e);if(new Date().getTime()-t.getTime()<6048e5)return(0,el.m)(t,{addSuffix:!0});return t.toLocaleString()}catch(t){return console.error("Error parsing start time:",t),e}}(e.start_time)})}),(0,s.jsx)(en,{children:(0,s.jsx)("p",{children:new Date(e.start_time).toLocaleString()})})]})}),(0,s.jsx)(q,{children:function(e,t){try{let r=(0,eo.H)(e);if(!t){let e=new Date,t=Math.round((e.getTime()-r.getTime())/1e3);if(t<0)return"-";if(t<60)return"".concat(t,"s");let s=Math.floor(t/60);if(s<60)return"".concat(s,"m ").concat(t%60,"s");let a=Math.floor(s/60);return"".concat(a,"h ").concat(s%60,"m")}let s=(0,eo.H)(t),a=Math.round((s.getTime()-r.getTime())/1e3);if(a<0)return"-";if(a<60)return"".concat(a,"s");let n=Math.floor(a/60);if(n<60)return"".concat(n,"m ").concat(a%60,"s");let o=Math.floor(n/60);return"".concat(o,"h ").concat(n%60,"m")}catch(e){return console.error("Error parsing date for duration:",e),"-"}}(e.start_time,e.end_time)}),(0,s.jsx)(q,{children:(0,s.jsxs)(W,{variant:r,className:"flex items-center gap-1 capitalize",children:[(0,s.jsx)(t,{className:"h-3 w-3 ".concat("running"===e.status?"animate-spin":"")}),e.status]})}),(0,s.jsx)(q,{className:"text-sm text-muted-foreground truncate max-w-md",children:(0,s.jsxs)(es,{children:[(0,s.jsx)(ea,{asChild:!0,children:(0,s.jsx)("span",{children:e.details||"-"})}),e.details&&(0,s.jsx)(en,{children:(0,s.jsx)("p",{className:"max-w-xs whitespace-normal",children:e.details})})]})})]},e.job_id)}),o&&r.length>0&&m()]})]})})})]})]})}function ef(){let[e,t]=(0,a.useState)(0),r=(0,a.useCallback)(()=>{console.log("Triggering history refresh from page..."),t(e=>e+1)},[]);return(0,s.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-start p-8 md:p-16 lg:p-24 bg-background",children:[(0,s.jsxs)("div",{className:"w-full max-w-6xl flex flex-col items-center space-y-12",children:[(0,s.jsxs)("header",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-primary tracking-tight mb-2",children:"GitDocu"}),(0,s.jsx)("p",{className:"text-xl text-foreground/80",children:"AI-Powered Git Repository Documentation"})]}),(0,s.jsx)(O,{onJobSubmitted:r}),(0,s.jsx)(eu,{refreshKey:e})]}),(0,s.jsx)("footer",{className:"mt-16 text-center text-muted-foreground text-sm",children:"Powered by Google ADK & Next.js"})]})}},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var s=r(2115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[206,941,441,684,358],()=>t(5831)),_N_E=e.O()}]);